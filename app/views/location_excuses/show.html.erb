<div class="parent-center container" style="justify-content: center;">
    <h5 class="mt-3 text-center">excuse found</h5>
    <% @location_excuse.lines_disrupted.to_i > 0 ? @mode = "bus" : @mode = "line" %>
    <% @mode = "road" if @location_excuse.journeys == [] %>
    <h2 class="mt-3 text-center">The <%= @location_excuse.lines_disrupted %> <%= @mode %> is disrupted</h2>
    <p class="mt-3 text-center"><%= @location_excuse.disruption_message %></p>
  </div>
  <% if LocationExcuse.find(@location_excuse.id + 1) %>
    <%= link_to "next excuse", location_excuse_path(@location_excuse.id + 1), class: "btn" %>
    <% else %>
    <%= link_to "next excuse", pages_no_excuse_path, class: "btn" %>
    <% end %>
</div>
<div style="background-image: url('<%= asset_url 'bgnodog.png' %>'); background-position: bottom; background-size: cover; width: 100vw; height: 100vh;" class="parent-center">
    <p><%= @location_excuse.journeys %></p>
    <% @coordinates = [] %>
    <% @location_excuse.journey_route.each do |leg|%>
    <% unless leg.class == Array %>
      <% leg = JSON.parse(leg) %>
    <% end %>

      <% leg.each do |coords| %>
        <% @coordinates << [coords[1], coords[0]] %>
      <% end %>
    <% end %>
    <div id="coordinates" style="display: none;" >
      <%= @coordinates %>
    </div>
    <div
      id="map"
      style="width: 100%;
      height: 600px;"
      data-markers="<%= @markers.to_json %>"
      data-mapboxApiKey="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>
  </div>
</div>
</div>
